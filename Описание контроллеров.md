# :book: Wiki по API

**Оглавление**

|Контроллер|Тип запроса          | Краткое описание                                     |
|:--------:|:-------------------:|------------------------------------------------------|
|Autho     |[POST](#Autho-POST)  | Авторизация по логину и паролю                       |
|          |[PUT](#Autho-PUT)    | Авторизация по сессии, продление времени жизни сессии|
|Status    |[GET](#Status-GET)   | Получение всех видов статуса                         |
|          |[POST](#Status-POST) | Получение статуса работника                          |
|          |[PUT](#Status-PUT)   | Установка нового статуса                             |
|Plan      |[GET](#Plan-GET)     | Получение видов графиков                             |
|          |[POST](#Plan-POST)   | Получение всех графиков по параметрам                |
|Task      |[GET](#Task-GET)     | Получение стадий заданий                             |
|          |[POST](#Task-POST)   | Получение заданий по параметрам                      |
|          |[PUT](#Task-PUT)     | Установка новых значений                             |
|Worker    |[POST](#Worker-POST) | Получение информации о работнике                     |

## Autho POST

Производит авторизацию пользователя по логину и паролю. 
*Пароль должен быть захеширован*

**Входные данные:**

```json
{
    "Login": "value",
    "Password": "value"
}
```

**Выходные данные:**

```json
{
    "Session": "value"
}
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|401, Unauthorized|Пользователь не найден|При авторизации не был найден пользователь с таким логином и паролем|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|
|500, InternalServerError|Сессия не была создана|Сессия не была создана по внутренней ошибке|


## Autho PUT

Производит авторизацию по сессии, продлевает ее вермя жизни

**Входные данные:**

```json
{
    "Session": "value"
}
```

**Выходные данные отсутствуют**

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|

## Status GET

Возвращает список всех возможных статусов

**Входные данные отсутствуют**

**Выходные данные:**

```json
[
	{
		"StatusCode": "value",
		"Title": "value",
		"Description": "value"
	},

]
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Status POST

Получает статус пользователя по сессии

**Входные данные:**

```json
{
    "Session": "value"
}
```

**Выходные данные:**

```json
{
	"StatusCode": "value",
	"Updated": "value"
}
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Status PUT

Устанавливает новый статус пользователя по сессии

**Входные данные:**

```json
{
	"Session": "value",
	"StatusCode": "value"
}
```

**Выходные данные отсутствуют**

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|400, BadRequest|Статус не может быть обновлён|Уже установленный статус не может быть обновлён|
|400, BadRequest|Статус не может быть установлен|Такой статус не может быть установленым|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Plan GET

Получение списка всех видов графиков

**Входные данные отсутствуют**

**Выходные данные:**

```json
[
	{
		"PlanCode": "value",
		"Title": "value"
	},

]
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Plan POST

Получение спсика графиков по сессии, начальному и конечному дню отбору и типов графика

**Входные данные:**

```json
{
	"Session": "value",
	"StartDate": "value",
	"EndDate": "value",
	"PlanCodes": ["value", ]
}
```

*`PlanCodes` может быть `null`, чтобы выбрать все планы без фильтрации по типам*

**Выходные данные:**

```json
[
	{
		"Date": "value",
		"DayStart": "value",
		"DayEnd": "value",
		"PlanCode": "value"
	},

]
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|400, BadRequest|Неправильные значения даты|Начальная дата была больше конечной|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|



## Task GET

Получает список всех стадий задач

**Входные данные отсутствуют**

**Выходные данные:**

```json
[
	{
		"Stage": "value",
		"Title": "value"
	},

]
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Task POST

Получает список заданий по сессии, стадии задач, дате создания - ?

**Входные данные:**

```json
{
	"Session": "value",
	"TaskStages": ["value", ],
	"DateCreation": "value"
}
```

*`DateCreation` может быть `null`, чтобы выбрать все задачи, не учитывая даты создания*

*`TaskStages` может быть `null`, чтобы выбрать все задачи без фильтрации по стадиям*

**Выходные данные:**

```json
[
	{
		"TaskId": "value",
		"Description": "value",
		"SetterWorkerName": "value",
		"Created": "value",
		"Finished": "value",
		"Stage": "value"
	},

]
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|400, BadRequest|Некорректный спсиок стадий|Полученный список стадий имеет некорректные значения|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Task PUT

Устанавливает задаче выбранное состояние (`приянтое к исполнению` или `завершенное`)

*Изменение задачи может происходить только тогда, когда работник находится на работе*

**Входные данные:**

```json
{
	"Session": "value",
	"TaskId": "value",
	"Stage": "value"
}
```

**Выходные данные отсутствуют**

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|400, BadRequest|Такая стадия не может быть установлена|Полученный статус не может быть установлен|
|400, BadRequest|Работник не на рабочем месте|Для установки стадии необходимо быть на рабочем месте|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|


## Worker POST

Получает информацию о сотруднике по сессии

**Входные данные:**

```json
{
    "Session": "value"
}
```

**Выходные данные:**

```json
{
    "Name": "value",
    "Surname": "value",
    "Patronymic": "value",
    "Department": "value",
    "Position": "value"
}
```

*Коды ошибок*

| Код  |Сообщение|Причина|
|:----:|---------|-------|
|400, BadRequest|Ошибка сериализации запроса|Отправляемый запрос имел некорректный вид|
|401, Unauthorized|Сессия не была найдена|Авторизация не была пройдена; такая сессия не существует|
|401, Unauthorized|Клиент не был найден|Авторизация не была пройдена; отправляемый клиент-отправитель не найден|
|500, InternalServerError|Ошибка обработки сообщения|Во вермя обработки сообщения на сервере произошла ошибка|
