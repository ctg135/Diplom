
# Сервер


- [x] Доработки старого:
    - [x] переименовать ~quest~ на task в БД
    - [x] Отдельная библиотека классов для json-запросов

- [x] - Перестройка API под новую базу данных
    - [x] Таблица workers (	+ Department + автовыбор; - Mail, BirthDate, Rate, AccessLevel не нужен)
    - [x] Таблица Plans (переделать Total на тип Плана)	
    	
- [ ] Фичи:
    - [x] Выгрузка видов плана api/Plans GET ++
    - [x] Объеденить api/Autho и api/Connection --
    - [x] Получение типов планов api/Plans GET ++
    - [x] Получение стадии задач api/Task GET ++
    - [ ] Получение задач по параметрам: сессия, [стадии задач], дата получения, (дата завершения - ?) api/Task POST
    - [ ] Установка выполненных задач по параметрам: сессия, номер задачи, новая стадия api/Task PUT

Допы:
- [ ] Для отпусков и больничных в api/Status POST сделать вывод даты начала
- [x] **Вери юзефул** - Перейти на новый логгер (Например `NLog`)
- [ ] Проверка наличия струтктур таблиц после подключения

## Общие данные по API:


|Готовность	          |Контроллер|Тип запроса| Краткое описание                                     |Комментарий|
|:-------------------:|:--------:|:---------:|------------------------------------------------------|-----------|
|:heavy_check_mark:   |Autho     |POST       | Авторизация по логину и паролю                       ||
|:heavy_check_mark:   |          |PUT        | Авторизация по сессии, продление времени жизни сессии||
|:heavy_check_mark:   |Status    |GET        | Получение всех видов статуса                         ||
|:heavy_check_mark:   |          |POST       | Получение статуса работника                          ||
|:heavy_check_mark:   |          |PUT        | Установка нового статуса                             ||
|:heavy_check_mark:   |Plan      |GET        | Получение видов графиков                             ||
|:heavy_check_mark:   |          |POST       | Получение всех графиков                              ||
|:heavy_check_mark:   |Task      |GET        | Получение стадий заданий                             ||
|:black_square_button:|          |POST       | Получение заданий по параметрам                      ||
|:heavy_check_mark:   |          |PUT        | Установка новых значений                             |Устанваливает новую стадию несколько раз и можно ее менять|
|:heavy_check_mark:   |Worker    |POST       | Получение информации о работнике                     ||

*:heavy_check_mark: - готов, :black_square_button: - не готов*

# Клиент

:heavy_exclamation_mark: **Сначала сервер!** :heavy_exclamation_mark:

 Над чем надо подумать:
- Переработать окно просмотра графика (Возможно сделать доп.окно для любых графиков, а главное окно в виде слайдиков)
- Окно просмотра заданий
- Окно просмотра уже выполненных заданий? (тоже типа архивы)
- Подумать над главным окном
- Сделать для каждой цели собственного iclient -> для статуса, для плана, авторизации, получения информации о работнике
- Добавить название отдела куда-нибудь
- Оптимизировать меню (чтобы не создавал по тыщу раз, а выгружал из памяти)
- Для кнопки "Выход" добавить окно подтверждения


# Общие функции


- [ ] - Просмотр графика с типами дней
- [ ] - Сохранение графика в кэше (???)
- [ ] - Просмотр и выполнение заданий
- [ ] - Просмотр выполненных заданий (???)
- [ ] - Отключение установки статуса при нерабочем статусе
- [ ] - Отключение выполения квестов при нерабочем статусе


Хеш: 


```cs
public string GetMyHash(string Input)
{
	var a = SHA1.Create();
	var h = a.ComputeHash(Encoding.UTF8.GetBytes("Хэшируемая строка"));
	StringBuilder builder = new StringBuilder();
	for (int i = 0; i < h.Length; i++)
	{
		builder.Append(h[i].ToString("x2"));
	}
	return builder.ToString();
}
```

## Феатуре - нот феатуре


? - косяк в коннекшне - создание одной и той же сессии + обнвление сессии не дает ошибки

? - хрень в проверке сессий

? - api/Status PUT проглатывает любой статус для установки